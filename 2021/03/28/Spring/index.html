<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;mozartto.cn&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;always&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script>
<meta name="description" content="Spring框架是 Java 平台的一个开源的全栈应用程序框架和控制反转容器实现，一般被直接称为 Spring。该框架的一些核心功能理论上可用于任何 Java 应用，但 Spring 还为基于Java企业版平台构建的 Web 应用提供了大量的拓展支持。Spring 没有直接实现任何的编程模型，但它已经在 Java 社区中广为流行，基本上完全代替了企业级JavaBeans模型。">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Framework">
<meta property="og:url" content="https://mozartto.cn/2021/03/28/Spring/index.html">
<meta property="og:site_name" content="Motto">
<meta property="og:description" content="Spring框架是 Java 平台的一个开源的全栈应用程序框架和控制反转容器实现，一般被直接称为 Spring。该框架的一些核心功能理论上可用于任何 Java 应用，但 Spring 还为基于Java企业版平台构建的 Web 应用提供了大量的拓展支持。Spring 没有直接实现任何的编程模型，但它已经在 Java 社区中广为流行，基本上完全代替了企业级JavaBeans模型。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mozartto.cn/images/5.jpg">
<meta property="article:published_time" content="2021-03-28T03:54:46.000Z">
<meta property="article:modified_time" content="2021-03-28T09:23:39.000Z">
<meta property="article:author" content="Motto">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mozartto.cn/images/5.jpg">


<link rel="canonical" href="https://mozartto.cn/2021/03/28/Spring/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;en&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;https:&#x2F;&#x2F;mozartto.cn&#x2F;2021&#x2F;03&#x2F;28&#x2F;Spring&#x2F;&quot;,&quot;path&quot;:&quot;2021&#x2F;03&#x2F;28&#x2F;Spring&#x2F;&quot;,&quot;title&quot;:&quot;Spring Framework&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>Spring Framework | Motto</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Motto</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">simple makes better</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-computer"><a href="/categories/computer/" rel="section"><i class="fas fa-laptop fa-fw"></i>computer</a></li>
        <li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="fas fa-book fa-fw"></i>books</a></li>
        <li class="menu-item menu-item-life"><a href="/categories/life/" rel="section"><i class="fas fa-mug-hot fa-fw"></i>life</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-games"><a href="/games/" rel="section"><i class="fab fa-steam fa-fw"></i>games</a></li>
        <li class="menu-item menu-item-other"><a href="/categories/other/" rel="section"><i class="fas fa-glass-cheers fa-fw"></i>other</a></li>
        <li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="fas fa-comment-dots fa-fw"></i>message</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring"><span class="nav-number">1.</span> <span class="nav-text">Spring</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Ioc%E6%A6%82%E5%BF%B5%E5%BC%95%E5%85%A5"><span class="nav-number">1.1.</span> <span class="nav-text">Spring_Ioc概念引入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Ioc%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95"><span class="nav-number">1.2.</span> <span class="nav-text">Spring_Ioc代码测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Ioc%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">1.3.</span> <span class="nav-text">Spring_Ioc实现原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Ioc%E5%92%8CDI%E6%A6%82%E5%BF%B5%E8%A7%A3%E9%87%8A"><span class="nav-number">1.4.</span> <span class="nav-text">Spring_Ioc和DI概念解释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Bean%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7%E7%AE%80%E4%BB%8B"><span class="nav-number">1.5.</span> <span class="nav-text">Spring_Bean标签属性简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-XML%E5%AE%9E%E7%8E%B0DI"><span class="nav-number">1.6.</span> <span class="nav-text">Spring_XML实现DI</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87p%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E5%92%8Cc%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E5%AE%9E%E7%8E%B0DI%EF%BC%88%E7%BB%99%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%EF%BC%89"><span class="nav-number">1.6.0.1.</span> <span class="nav-text">通过p名称空间和c名称空间实现DI（给对象属性赋值）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87DI%E6%B3%A8%E5%85%A5%E4%B8%80%E4%BA%9B%E7%A9%BA%E5%80%BC%E5%92%8C%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="nav-number">1.6.1.</span> <span class="nav-text">通过DI注入一些空值和特殊符号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E4%B8%AD%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E6%9C%89%E5%85%B6%E5%AE%83%E7%B1%BB%E6%97%B6%E7%9A%84bean%E2%80%94%E2%80%94%E9%80%9A%E8%BF%87ref%E6%88%96%E5%B5%8C%E5%A5%97bean"><span class="nav-number">1.6.2.</span> <span class="nav-text">类中成员变量有其它类时的bean——通过ref或嵌套bean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8DI%E4%B8%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E6%97%B6%EF%BC%8C%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E6%98%AFList%E3%80%81Map%E7%AD%89%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">1.6.3.</span> <span class="nav-text">使用DI为对象的属性赋值时，成员变量是List、Map等特殊类型的情况</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-bean%E5%B7%A5%E5%8E%82"><span class="nav-number">1.7.</span> <span class="nav-text">Spring_bean工厂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.8.</span> <span class="nav-text">SpringBean的生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="nav-number">1.9.</span> <span class="nav-text">Spring自动装配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-%E8%AF%BB%E5%8F%96%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.10.</span> <span class="nav-text">Spring_读取属性配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Ioc%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.11.</span> <span class="nav-text">Spring_Ioc注解方式实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-DI%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.12.</span> <span class="nav-text">Spring_DI注解方式实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BB%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0Ioc%E5%92%8CDI"><span class="nav-number">1.13.</span> <span class="nav-text">配置类方式实现Ioc和DI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E6%A6%82%E5%BF%B5%E5%92%8C%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.14.</span> <span class="nav-text">Spring_代理模式概念和静态代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.15.</span> <span class="nav-text">Spring_JDK动态代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.16.</span> <span class="nav-text">Spring_cglib动态代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Aop%E6%9C%AF%E8%AF%AD%E8%A7%A3%E6%9E%90"><span class="nav-number">1.17.</span> <span class="nav-text">Spring_Aop术语解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-AOP%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87"><span class="nav-number">1.18.</span> <span class="nav-text">Spring_AOP项目准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-AOP%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.19.</span> <span class="nav-text">Spring_AOP注解实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#JoinPoint%E5%AF%B9%E8%B1%A1%E5%92%8CProceedingJoinPoint%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.19.1.</span> <span class="nav-text">JoinPoint对象和ProceedingJoinPoint对象</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%EF%BC%88%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%89"><span class="nav-number">1.20.</span> <span class="nav-text">完全使用注解开发（使用配置类）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-AOP-XML%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.21.</span> <span class="nav-text">Spring_AOP_XML实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-JdbcTemplate%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA"><span class="nav-number">1.22.</span> <span class="nav-text">Spring_JdbcTemplate项目搭建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-%E4%BA%8B%E5%8A%A1%E5%9B%9E%E9%A1%BE"><span class="nav-number">1.23.</span> <span class="nav-text">Spring_事务回顾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-%E6%97%A5%E5%BF%97%E4%BD%BF%E7%94%A8"><span class="nav-number">1.24.</span> <span class="nav-text">Spring_日志使用</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Motto"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Motto</p>
  <div class="site-description" itemprop="description">a blog about some record in life</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">34</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Mozartto" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Mozartto" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=1220883974@qq.com" title="E-Mail → https:&#x2F;&#x2F;mail.qq.com&#x2F;cgi-bin&#x2F;qm_share?t&#x3D;qm_mailme&amp;email&#x3D;1220883974@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Jerry21313800" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Jerry21313800" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.quora.com/profile/Jerry-1020" title="Quora → https:&#x2F;&#x2F;www.quora.com&#x2F;profile&#x2F;Jerry-1020" rel="noopener" target="_blank"><i class="fab fa-quora fa-fw"></i>Quora</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Mozartto" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
    
    <div class="post-gallery-image">
      <img src="/images/5.jpg" itemprop="contentUrl">
    </div>
    </div>

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mozartto.cn/2021/03/28/Spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Motto">
      <meta itemprop="description" content="a blog about some record in life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Motto">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring Framework
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-28 11:54:46 / Modified: 17:23:39" itemprop="dateCreated datePublished" datetime="2021-03-28T11:54:46+08:00">2021-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/computer/" itemprop="url" rel="index"><span itemprop="name">computer</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan: </span>
    
    
      <a title="changyan" href="/2021/03/28/Spring/#SOHUCS" itemprop="discussionUrl">
        <span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="2021/03/28/Spring/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>8.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>8 mins.</span>
    </span>
</div>

            <div class="post-description">Spring框架是 Java 平台的一个开源的全栈应用程序框架和控制反转容器实现，一般被直接称为 Spring。该框架的一些核心功能理论上可用于任何 Java 应用，但 Spring 还为基于Java企业版平台构建的 Web 应用提供了大量的拓展支持。Spring 没有直接实现任何的编程模型，但它已经在 Java 社区中广为流行，基本上完全代替了企业级JavaBeans模型。</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><p>Spring的功能是降低耦合，还有整合其它框架。比如SpringMVC和MyBatis都可以整合到Spring中。</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210410184125297.png" alt="image-20210410184125297" style="zoom:67%;" />

<h3 id="Spring-Ioc概念引入"><a href="#Spring-Ioc概念引入" class="headerlink" title="Spring_Ioc概念引入"></a>Spring_Ioc概念引入</h3><p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210410184450871.png" alt="image-20210410184450871"></p>
<p>我们想创建对象时是直接到容器里面去取，而不是自己现场创建实现类。所有实现类全部放在容器里。我们直接在配置文件中指定一下实现类的路径即可。创建对象的权利由我们自己反转给了配置文件和容器，这种控制方式可以降低模块之间的耦合度。当我们需要修改某个对象时，不需要在模块中现场修改对象，只需要修改配置文件即可。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210410185905670.png" alt="image-20210410185905670"></p>
<h3 id="Spring-Ioc代码测试"><a href="#Spring-Ioc代码测试" class="headerlink" title="Spring_Ioc代码测试"></a>Spring_Ioc代码测试</h3><p>首先先创建一个maven项目（maven项目的创建步骤参考maven笔记），然后导入spring容器的五个核心jar包（在pom.xml文件中使用dependency导入，依赖的代码到mvnrepository.com里面去找。四个核心jar包是上面绿色图中的Beans、Core、Context、SpEL</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411111008461.png" alt="image-20210411111008461" style="zoom:60%;" />

<p>其实我们只需要导一个context包，它就包含了上面的四个核心jar包。</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411111322195.png" alt="image-20210411111322195" style="zoom:67%;" />

<p>如何查看当前导入的依赖的关系图：点击右侧侧边栏上的maven，然后点击右上角那个闪电图标右侧的那个有两个箭头的图标即可查看到如下图所示的注入依赖的关系图：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411111502441.png" alt="image-20210411111502441"></p>
<p>我们要进行测试（test文件夹下的代码），所以还要导一个junit包，在mvn仓库里面找。</p>
<p>之前我们在写mybatis的时候操作每个数据库表都需要自己在Java文件夹中创建一个对应的实体类，test方法每次都要new一个实体类对应的实现类对象。上面说过这样的话项目耦合度过高。所以我们要创建一个容器，然后把对象全部放到容器中去，然后通过一个配置文件访问我们所需的对象。那IDEA提供了一种非常便利的创建Spring配置文件的方法。如下图，在创建新的xml文档的时候可以直接创建spring Config文件。（注意是在maven项目的resources目录下建）</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411113740662.png" alt="image-20210411113740662"></p>
<p>因为我们有连接数据库的DAO文件（之前mybatis中的mapper文件），那么我们要对应的实现类，实现类要自己写（之前学mybatis的时候是把操作数据库的方法写在一个接口里做抽象方法，然后在mapper里具体实现，并且要创建一个接口对应的实现类，在test方法中创建实现类对象），但是当我们需要实现类对象的时候，不需要自己new实现类对象，只需要到容器中去取实现类对象即可，也就是说实现类我们自己写好之后，要在容器中创建对应的实现类对象。所以现在我们要在配置文件中配置对应的实现类对象的路径。</p>
<p>IDEA为我们创建的原始的Spring配置文件如下：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411114058625.png" alt="image-20210411114058625" style="zoom:67%;" />

<p>里面有beans标签，我们需要为我们的实现类对象创建bean标签：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411114618680.png" alt="image-20210411114618680" style="zoom:67%;" />

<p>bean标签中的class选项对应的就是我们自己写的实体类，然后它会把实体类放入一个map集合中，真实的class就是实体类的值，这个id就相当于是一个键，每个id和class构成一个键值对。当我们需要这个实体类的对象的时候不用自己new，只需要引用这个id即可。</p>
<p>那么在test方法中我们需要实现类对象的时候我们该如何获取呢？首先要先创建一个容器：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411115837411.png" alt="image-20210411115837411"></p>
<p>使用ApplicationContext类来创建容器对象，参数里面传入我们配置文件的名称。</p>
<p>然后创建EmpDao接口对应的实现类对象时就不用new了，之间使用getBean方法，里面传入之前设置的id（里面其实可以传两个参数，如何后面那个参数你不传的话，前面就要进行一下强制类型转换），如果要传的话，就传”接口名.class”</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411120505808.png" alt="image-20210411120505808"></p>
<p>注意：对应的接口和实现类都要自己先写好。</p>
<h3 id="Spring-Ioc实现原理"><a href="#Spring-Ioc实现原理" class="headerlink" title="Spring_Ioc实现原理"></a>Spring_Ioc实现原理</h3><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411125050065.png" alt="image-20210411125050065" style="zoom: 67%;" />

<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411124453642.png" alt="image-20210411124453642"></p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411125425987.png" alt="image-20210411125425987"></p>
<h3 id="Spring-Ioc和DI概念解释"><a href="#Spring-Ioc和DI概念解释" class="headerlink" title="Spring_Ioc和DI概念解释"></a>Spring_Ioc和DI概念解释</h3><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411125730020.png" alt="image-20210411125730020" style="zoom: 67%;" />

<p>创建对象不用我们管，Spring来管。创建对象这一块是Ioc来管。那么对象的属性赋值谁来管呢？也是Spring来管，也就是说不用我们自己去调get/set方法去给对象赋值</p>
<p>实际开发中基于注解方式的Bean管理用得比较多。基于XML方式的Bean管是便于我们对下一步学习的理解。</p>
<h3 id="Spring-Bean标签属性简介"><a href="#Spring-Bean标签属性简介" class="headerlink" title="Spring_Bean标签属性简介"></a>Spring_Bean标签属性简介</h3><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411132333568.png" alt="image-20210411132333568" style="zoom:67%;" />

<p>在XML配置文件中可以配置积极加载和懒加载。积极加载在初始化容器的时候就会调用new 对象的构造方法，懒加载则在初始化容器的时候不会初始化对象，必须要我们手动在容器中取出对象时它才会初始化对象。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411132939275.png" alt="image-20210411132939275"></p>
<p>bean标签还有一个属性值，就是scope，如果scope选择singleton，则每次创建相同的对象时都是从容器中取出相同的对象（取出两次相同的对象，检测结果两个对象为同一个），如果scope选择prototype，则取出相同的对象时会创建新的对象，不会直接取原来的对象。（在内存上指向不同的对象）</p>
<p>一般我们在开发项目的时候能用singleton就用这个，单例节省内存，不用重新创建对象。（在不涉及线程共享和线程安全时优先考虑）</p>
<p>普通的Java项目的scope只有这两个选项，一般的web项目的scope还有其它选项：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411133924798.png" alt="image-20210411133924798" style="zoom:60%;" />

<p>在创建完对象之后我们发现对象的属性是没有被赋值的，那么如何给这些属性赋值呢？请看下面一节。</p>
<h3 id="Spring-XML实现DI"><a href="#Spring-XML实现DI" class="headerlink" title="Spring_XML实现DI"></a>Spring_XML实现DI</h3><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411134129501.png" alt="image-20210411134129501" style="zoom:70%;" />

<p>property name 后面对应的是实体类里面的属性名，value是我们赋的属性值（前提是你的实体类中要有set方法），那这样我们在初始化对象的时候Spring就会自动为我们调用类中的set方法为对象的属性赋值。</p>
<p>如果属性中有其它对象，则会用到ref标签（property中还有一个ref标签）</p>
<p>刚刚那个是通过get/set方法给实现类对象的属性赋值，如果想要通过构造方法给实体类对象的属性赋值的话，需要使用另一个标签来代替property：constructor-arg标签</p>
<p>注意：使用property方法设定属性的值可以不用全部设定，而如果要使用有参构造方法则必须将构造方法中指定的所有参数全部传入。index指的是参数的顺序，从0开始。</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411151628643.png" alt="image-20210411151628643" style="zoom:67%;" />

<h5 id="通过p名称空间和c名称空间实现DI（给对象属性赋值）"><a href="#通过p名称空间和c名称空间实现DI（给对象属性赋值）" class="headerlink" title="通过p名称空间和c名称空间实现DI（给对象属性赋值）"></a>通过p名称空间和c名称空间实现DI（给对象属性赋值）</h5><p>为了简化上面两种写法，我们需要先启用p名称空间和c名称空间，在xml配置文件的开头加上这么灰色的两行，即可开启p名称空间和c名称空间：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411152020556.png" alt="image-20210411152020556" style="zoom:67%;" />

<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411152252844.png" alt="image-20210411152252844" style="zoom:80%;" />



<h4 id="通过DI注入一些空值和特殊符号"><a href="#通过DI注入一些空值和特殊符号" class="headerlink" title="通过DI注入一些空值和特殊符号"></a>通过DI注入一些空值和特殊符号</h4><p>为成员属性赋值的时候一些特殊情况：</p>
<p>CDATA标签代表指定里面的内容是纯文本，不需要对特殊符号进行转义</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411152916695.png" alt="image-20210411152916695" style="zoom:70%;" />

<p>xml文件中的写法：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411153011934.png" alt="image-20210411153011934" style="zoom:67%;" />



<h4 id="类中成员变量有其它类时的bean——通过ref或嵌套bean"><a href="#类中成员变量有其它类时的bean——通过ref或嵌套bean" class="headerlink" title="类中成员变量有其它类时的bean——通过ref或嵌套bean"></a>类中成员变量有其它类时的bean——通过ref或嵌套bean</h4><p>现在有一个小老鼠类，小老鼠类里面有一个birthday属性，其类型为Date类型，我们在容器中添加这个对象时如果直接添加字符串形式的日期给birthday属性的话会出错，所以我们要往里面添加一个Date对象。那我们自己就需要先在容器中创建一个Date对象，然后让小老鼠对象进行ref引用。</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411182243996.png" alt="image-20210411182243996" style="zoom: 80%;" />

<p>现在有一个cat类，里面有小老鼠类作为成员变量：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411183609282.png" alt="image-20210411183609282" style="zoom:67%;" />

<p>在容器中创建cat类的对象：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411183505818.png" alt="image-20210411183505818" style="zoom:73%;" />

<p>创建cat类对象时为Mouse成员变量赋值，直接ref引用上面的那只小老鼠，和小老鼠ref引用外部Date对象一样</p>
<p>在测试方法里面测试一波：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411183813715.png" alt="image-20210411183813715"></p>
<p>除了引用外部的bean之外，我们还可以直接直接在内部创建一个bean，然后再为内部的bean进行赋值（使用property标签）</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411184052245.png" alt="image-20210411184052245" style="zoom:75%;" />

<p>内部的bean中还可以再创建bean，这是一种内部的级联写法。</p>
<p>还有：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411184525113.png" alt="image-20210411184525113" style="zoom:80%;" />

<p>mouse2是老鼠名，mouse1是cat中的成员变量，当作mouse即可。</p>
<p>注意，使用mouse1.name的时候一定要保证mouse对象有name对应的get方法才行。</p>
<h4 id="使用DI为对象的属性赋值时，成员变量是List、Map等特殊类型的情况"><a href="#使用DI为对象的属性赋值时，成员变量是List、Map等特殊类型的情况" class="headerlink" title="使用DI为对象的属性赋值时，成员变量是List、Map等特殊类型的情况"></a>使用DI为对象的属性赋值时，成员变量是List、Map等特殊类型的情况</h4><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411203441191.png" alt="image-20210411203441191" style="zoom:67%;" />

<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411203600349.png" alt="image-20210411203600349" style="zoom:67%;" />

<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411203640006.png" alt="image-20210411203640006" style="zoom:67%;" />

<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411203934072.png" alt="image-20210411203934072" style="zoom:67%;" />

<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411203820707.png" alt="image-20210411203820707" style="zoom:67%;" />

<h3 id="Spring-bean工厂"><a href="#Spring-bean工厂" class="headerlink" title="Spring_bean工厂"></a>Spring_bean工厂</h3><p>我们提前创建好了一个Book类，现在创建一个生产Book的工厂，BookFactory类：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210411205728949.png" alt="image-20210411205728949" style="zoom:67%;" />

<p>工厂模式需要实现FactoryBean<T>接口，并重写其中的两个抽象方法。注意这个方法返回的是一个Book对象，而不是BookFactory对象，但是我们在容器的xml文件中配置的是工厂类，但返回的是Book类的对象。</p>
<h3 id="SpringBean的生命周期"><a href="#SpringBean的生命周期" class="headerlink" title="SpringBean的生命周期"></a>SpringBean的生命周期</h3><p>SpringBean的生命周期分为五步：(以在容器中放入的User对象为例)</p>
<p>如果此时我们要创建一个User的实体类对象，不需要自己创建，只需要从容其中获取。</p>
<ol>
<li>第一步：User构造（调用实体类中的构造方法）</li>
<li>第二步：User set方法，通过DI为属性赋值</li>
<li>第三步：User初始化，调用Userinit方法？</li>
<li>第四步：User获取，可以在测试方法中获取User并进行输出等操作</li>
<li>第五步：User销毁。User销毁会随着容器的关闭而销毁，如果我们想要手动关闭，调用application.close()方法即可。（一开始获取容器是通过application对象获取的，获取容器对象那一步）</li>
</ol>
<p>在User类中定义完相应的方法之后要在容器中告诉Bean各个方法对应的作用：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412125401146.png" alt="image-20210412125401146"></p>
<p>添加后置处理器：</p>
<p>如果我们想要在初始化之前和初始化之后对我们的Bean对象做出一些处理，我们需要额外写一个后置处理器类，并让它实现BeanPostProcessor接口，并重写其中的两个方法。然后要在容器中通过显式地去注册    后置处理器。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412125256913.png" alt="image-20210412125256913"></p>
<p>就算初始化方法没有，后置处理器也会在第三步的时候进行干预。</p>
<h3 id="Spring自动装配"><a href="#Spring自动装配" class="headerlink" title="Spring自动装配"></a>Spring自动装配</h3><p>当一个对象中的属性有其它对象时，我们想要在容器中添加这个对象，往往还要先添加其属性中包含的对象。那有没有方法可以自动帮我们添加其中包含的对象呢？通过autowire关键字，我们就可以让容器自动检测其中装有的对应的对象，并自动帮我们添加。（这样我们就不用通过property属性手动添加了，大妙）</p>
<p>autowire有两个选项可选：byName和byType</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412131924102.png" alt="image-20210412131924102" style="zoom:67%;" />

<p>byName要求在容器中被期望添加的对象与类中的对象名一致（要保证当前的属性值与目标id保持一致）</p>
<p>byType是根据数据类型，此时跟名字就没关系了。</p>
<p>注意，使用byType类型时目标类型在容器中只能有一个，否则bean不知道要装配哪一个：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412132410606.png" alt="image-20210412132410606" style="zoom:80%;" />



<h3 id="Spring-读取属性配置文件"><a href="#Spring-读取属性配置文件" class="headerlink" title="Spring_读取属性配置文件"></a>Spring_读取属性配置文件</h3><p>之前在MyBatis中讲过读取jdbc.properties属性配置文件并对其进行编辑，那么这个功能在Spring中是否可以实现呢？也可以。这样一种技术叫做数据库连接池技术。</p>
<p>阿里自己写的德鲁伊连接池性能很好。注意，以后连接池都不叫连接池了，叫数据源。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412133648044.png" alt="image-20210412133648044"></p>
<p>德鲁伊的依赖可以在mvnrepository.com去找（Druid），搜alibaba也可以。</p>
<p>然后通过maven导入对应的dependencies（jar包，里面有对应的class类），并在容器中添加其对应的bean。</p>
<p>在bean中需要通过property属性来配置类中的四个和数据连接有关的成员变量信息：username、password、url、driverClassName</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412150206342.png" alt="image-20210412150206342"></p>
<p>xml中双标签中间没有内容的可以直接写成单标签。</p>
<p>然后你会发现和之前一样，这些JDBC信息写在bean的配置文件中耦合度有点高了，所以我们最好把这些信息单独写在一个另外的jdbc.properties文件中，然后在bean容器配置文件中使用美元符+大括号引用即可。</p>
<p>容器的xml文件中：（加上jdbc前缀防止重名）</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412155427356.png" alt="image-20210412155427356" style="zoom:80%;" />

<p>jdbc.properties文件中：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412155505668.png" alt="image-20210412155505668"></p>
<h3 id="Spring-Ioc注解方式实现"><a href="#Spring-Ioc注解方式实现" class="headerlink" title="Spring_Ioc注解方式实现"></a>Spring_Ioc注解方式实现</h3><p>前面说的bean对象的创建和通过DI为属性赋值基本上都是通过xml文件实现的，但这在实际开发中其实不是很常用。实际开发中常用的是通过注解方式实现。下面来说一下：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412160048986.png" alt="image-20210412160048986" style="zoom:60%;" />

<p>上面那个是“但是不推荐”。。。</p>
<p>bean的xml文件中：添加context那一行</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412161556883.png" alt="image-20210412161556883"></p>
<p>相当于bean中直接就添加了左侧bean包里的两个类</p>
<p>然后在类上加上@Component注解即可在容器中成功地添加这个类，注解后面可以加括号，括号里写的就是test方法中获取的当前类的对象地名称，相当于之前的id。<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412162431825.png" alt="image-20210412162431825" style="zoom:50%;" /></p>
<p>test方法：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412162524947.png" alt="image-20210412162524947"></p>
<p>排除注解：（一般默认情况下四个注解都用，但也可以指定不识别某个特定注解）</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210412170320054.png" alt="image-20210412170320054"></p>
<p>比如上图就不会识别Controller注解，其它注解都可以识别。exclude是排除，include是包含（识别）。</p>
<h3 id="Spring-DI注解方式实现"><a href="#Spring-DI注解方式实现" class="headerlink" title="Spring_DI注解方式实现"></a>Spring_DI注解方式实现</h3><p>当容器中的对象想要引用容器中的另一个对象时（其成员属性中有一个对象），在其实体类中对应的成员变量的对象上加上@Autowired注解，则容器会自动寻找容器中是否已经有我们需要引用的对象，如果有会自动进行引用并给属性赋值。</p>
<p>比如service层里面有DAO对象，但是我们不能直接在service层或者其对应的方法中直接new一个DAO对象，因为这样就提高了两层之间的耦合度。那spring的目的就是把对象放入容器中从而降低耦合度，所以我们需要在容器中创建service类中的DAO类的对象（成员变量）。之前的方法是先在容器中创建好DAO层的对象，然后在service层的bean标签中的property标签里引用DAO层的对象。但是现在不用了，你只需要在service的实体类中的DAO成员变量上加上@Autowired注解，容器就会为我们自动添加，不用通过property标签添加。（但是还是要在容器中创建实体类对象，前面我们说过，我们可以直接在实体类上写@Component注解，从而让容器自动帮助我们创建对象，不用再自己去写bean标签。那DAO层的实体类上应该写的是@Repository注解（@Component的子注解，在数据库交互层使用），service层的实体类上写的应该是@service注解，同时service层的实体类中的DAO对象上又写了@property注解，这样他喵的我们在容器中啥都不用写😊。</p>
<p>DAO层实体类：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413113625783.png" alt="image-20210413113625783" style="zoom:67%;" />

<p>service层实体类：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413113522943.png" alt="image-20210413113522943" style="zoom: 67%;" />

<p>注意每一层都有一个接口，方法定义在接口中，实体类继承了接口之后重写其中的方法：（可以有多个同一层的多个实体类继承同一个接口）</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413113717511.png" alt="image-20210413113717511" style="zoom:67%;" />

<p>注意，如果上图中你DAO层的两个实现类A和B都添加了@Repository注解，那系统会报错，因为他不知道到底要new哪一个实体类的对象。</p>
<p>如果你想两个实体类都加@Repository注解，但可以指定调用其中一个类的对象，可以使用@Qualifier注解，可以通过名称去找，默认名称就是类名（首字母小写）：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413114520989.png" alt="image-20210413114520989" style="zoom:67%;" />

<p>也可以通过@Resource注解，可以直接添加指定类名：（相当于上面两个注解加起来），不加后面那个括号就相当于@Autowired</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413115206469.png" alt="image-20210413115206469" style="zoom:60%;" />

<p>但在实际开发中很少出现DAO层一个接口有两个实现类的，所以很少用名称去找，@Autowired用得较多。</p>
<p>因为@Autowired来自SpringFrameWork包，而@Resource来自javax包。Spring官方推荐是使用来自Spring的注解，这样可以降低Spring和JDK的耦合度。但是你想用@Resource注解也没问题。</p>
<p>使用@Value注解为可以直接成员变量赋值：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413120005504.png" alt="image-20210413120005504" style="zoom: 60%;" />

<p>使用字符串为Integer类型赋值系统会自动转换。但是这样赋值有弊端，就是这个值直接写死在这个类里面了，如果以后我们想要动态的读取和修改，就会很麻烦。</p>
<p>但是我们之前学过可以把这些玩意儿写在property配置文件中👨‍🚀，然后通过 ${} 进行引用，大妙啊。</p>
<p>先在容器中指定一下配置文件：（上面那一行）</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413121610991.png" alt="image-20210413121610991"></p>
<p>配置文件中的内容：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413121855895.png" alt="image-20210413121855895" style="zoom:67%;" />

<p>原来的类中成员变量上的@Value注解内容可以进行引用了：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413121807417.png" alt="image-20210413121807417" style="zoom:67%;" />

<p>注意，这里没有加前缀，但是最好还是加上，以免搞混（就像jdbc配置文件中的信息加了jdbc_前缀一样）</p>
<h3 id="配置类方式实现Ioc和DI"><a href="#配置类方式实现Ioc和DI" class="headerlink" title="配置类方式实现Ioc和DI"></a>配置类方式实现Ioc和DI</h3><p>前面已经说过，配置文件中几乎什么信息都不用写，除了包扫描信息和一些引用property文件的信息，那配置文件中内容这么少，其实配置文件可以不用写，我们可以用一个类，通过代码的提示来体现配置信息。</p>
<p>作为了解即可，我感觉还是配置文件香，反正代码量都是一样的少。</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413123318519.png" alt="image-20210413123318519" style="zoom:67%;" />

<p>在配置类中用两个注解可以代替xml容器配置文件，又感觉有点香了，好简洁。注意，使用配置类最好新建一个Config文件夹然后把配置类都放这里面。</p>
<h3 id="Spring-代理模式概念和静态代理"><a href="#Spring-代理模式概念和静态代理" class="headerlink" title="Spring_代理模式概念和静态代理"></a>Spring_代理模式概念和静态代理</h3><p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413123900548.png" alt="image-20210413123900548"><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413124455110.png" alt="image-20210413124455110" style="zoom: 45%;" /></p>
<p>Aop就是通过代理模式来实现其具体功能的.</p>
<p>静态代理实际开发中几乎不用，而且麻烦不好用，增加工作量且效率低下。</p>
<p>代理的精髓就是我们想要使用一个对象，可以用另外一个对象来代理这个对象，并对其中的功能进行拓展和增强。当我们想要使用这个对象时可以直接使用它的代理对象，但是代理对象中有一部分功能时来自于原来的对象。</p>
<p>代理模式一共有三个组成部分：</p>
<ol>
<li>被代理的类</li>
<li>代理类</li>
<li>面向的或者要实现的接口</li>
</ol>
<h3 id="Spring-JDK动态代理"><a href="#Spring-JDK动态代理" class="headerlink" title="Spring_JDK动态代理"></a>Spring_JDK动态代理</h3><p>代理类在程序运行时才会创建的代理模式称为动态代理模式。在这种情况下，代理类并不是在Java代码中定义好的，而是在程序运行时根据我们在Java代码中的“指示”动态生成的。</p>
<p>这种动态代理有两种模式：</p>
<ol>
<li>JDK内置的Proxy动态代理——面向接口</li>
<li>cglib第三方动态代理——面向父类</li>
</ol>
<p>动态代理案例——张三吃饭</p>
<p>通过Proxy动态代理获得一个代理对象，在代理对象中，对某个方法进行增强</p>
<p>调用JDK中Proxy类的newProxyInstance()方法，此方法中传入三个参数：loader、interfaces、h</p>
<p>向上转型自动转，向下转型要强转。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413195534440.png" alt="image-20210413195534440"></p>
<p>我们在调用重写的抽象方法时系统会自动执行invoke方法，invoke方法中可以定义增强方法功能的代码</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413202959233.png" alt="image-20210413202959233"></p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413202809125.png" alt="image-20210413202809125"></p>
<p>JDK动态代理模式比较难理解，如果大家觉得不好理解的话，就先记住动态代理的定义即可</p>
<h3 id="Spring-cglib动态代理"><a href="#Spring-cglib动态代理" class="headerlink" title="Spring_cglib动态代理"></a>Spring_cglib动态代理</h3><p>子类直接继承来父类方法然后对父类方法进行功能重写，在new对象时new子类对象即可，这是cglib代理模式的底层逻辑。</p>
<p>cglib代理模式的执行步骤：</p>
<ol>
<li>获得一个Enhancer对象（专门用来生产代理对象的）</li>
<li>设置父类的字节码</li>
<li>获取MethodIntercepter对象，用于定义增强规则</li>
<li>获得代理对象</li>
<li>使用代理对象完成功能</li>
</ol>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413211456121.png" alt="image-20210413211456121"></p>
<p>获得代理对象之前再加一步：</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413211644118.png" alt="image-20210413211644118"></p>
<p>cglib代理和jdk代理了解即可，因为这个已经到了写工具给别人用的阶段了，现在刚入门可以先基本了解一下。</p>
<h3 id="Spring-Aop术语解析"><a href="#Spring-Aop术语解析" class="headerlink" title="Spring_Aop术语解析"></a>Spring_Aop术语解析</h3><p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210413213313773.png" alt="image-20210413213313773"></p>
<ol>
<li>可以被增强的方法称为连接点，但是连接点不一定被增强</li>
<li>每一个切入点都是连接点，但连接点不一定是切入点</li>
</ol>
<h3 id="Spring-AOP项目准备"><a href="#Spring-AOP项目准备" class="headerlink" title="Spring_AOP项目准备"></a>Spring_AOP项目准备</h3><p>我们以一个DAO层的方法增强的案例来进行AOP的演示。</p>
<p>AspectJ 本身并不是spring框架中的组成部分，是一个独立的AOP框架，一般把 AspectJ 和spring框架的AOP依赖一起使用，所以要导入一个独立的依赖。</p>
<p>实现的两种方式：</p>
<ol>
<li>基于注解方式实现（熟练）</li>
<li>基于XML配置方式（了解）（实际开发中用的一般都是注解）</li>
</ol>
<p>还要导入一大堆jar包（通过maven的pom.xml配置文件导入依赖）</p>
<p>一共需要导入如下几个jar包：spring-aspects包、aopalliance包、commons-logging包、Junit包、Lombok包，如果需要连接数据库进行操作的话还可以导入Druid包和MySQL驱动包。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415121021646.png" alt="image-20210415121021646"></p>
<h3 id="Spring-AOP注解实现"><a href="#Spring-AOP注解实现" class="headerlink" title="Spring_AOP注解实现"></a>Spring_AOP注解实现</h3><p>AOP的功能就是用来增强方法的，和之前的动态代理一样。有@Before和@After，可以在你所需执行的方法的前后自己再定义功能，可以增强方法。</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415122725296.png" alt="image-20210415122725296" style="zoom:67%;" />

<p>指定在addUser方法前运行此方法（注意，这个Aspect也需要使用@Component来在容器中创建对象</p>
<p>参数列表可以用JoinPoint接收切点对象</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415124316766.png" alt="image-20210415124316766" style="zoom:67%;" />

<p>后置通知无论切点方法是否出现异常，都会被执行：（也叫做最终通知）</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415124535795.png" alt="image-20210415124535795" style="zoom:67%;" />

<p>如何获得目标方法的返回结果呢？使用@AfterReturning。返回通知：在切点方法返回结果之后增强的功能</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415125602816.png" alt="image-20210415125602816" style="zoom:80%;" />

<p>如果切点方法出现异常则此方法不会执行（注意与@After方法的区别）</p>
<p>异常通知：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415131435358.png" alt="image-20210415131435358" style="zoom:67%;" />



<p>环绕通知：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415132930212.png" alt="image-20210415132930212" style="zoom:67%;" />

<p>注意，每个通知前面都有切点表达式，那我们可以把切点表达式给抽出来，定义一个公共切点：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415133125800.png" alt="image-20210415133125800" style="zoom:67%;" />



<p>下面的方法上注释可以改成这样：</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415133151269.png" alt="image-20210415133151269" style="zoom:67%;" />

<p>公共切点execution中不建议写实现类，耦合度有点高，可以让它指向接口</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415133320134.png" alt="image-20210415133320134" style="zoom:67%;" />



<h4 id="JoinPoint对象和ProceedingJoinPoint对象"><a href="#JoinPoint对象和ProceedingJoinPoint对象" class="headerlink" title="JoinPoint对象和ProceedingJoinPoint对象"></a>JoinPoint对象和ProceedingJoinPoint对象</h4><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415134901125.png" alt="image-20210415134901125" style="zoom: 60%;" />





<h3 id="完全使用注解开发（使用配置类）"><a href="#完全使用注解开发（使用配置类）" class="headerlink" title="完全使用注解开发（使用配置类）"></a>完全使用注解开发（使用配置类）</h3><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415135459180.png" alt="image-20210415135459180" style="zoom:67%;" />



<h3 id="Spring-AOP-XML实现"><a href="#Spring-AOP-XML实现" class="headerlink" title="Spring_AOP_XML实现"></a>Spring_AOP_XML实现</h3><p>这里系统解释一下切点和切面的区别。切点是什么呢？切点就是我们想要增强的某个方法。切面是什么呢？就是我们增强了方法之后添加的@Before、@After等等等等一大堆在被增强方法前后执行的所有方法。这些方法构成一个切面，而原来的最初的方法是切点。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415195316410.png" alt="image-20210415195316410"></p>
<h3 id="Spring-JdbcTemplate项目搭建"><a href="#Spring-JdbcTemplate项目搭建" class="headerlink" title="Spring_JdbcTemplate项目搭建"></a>Spring_JdbcTemplate项目搭建</h3><p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415200200747.png" alt="image-20210415200200747"></p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415200235344.png" alt="image-20210415200235344" style="zoom:50%;" />

<p>我们之前学的Ioc、DI是在Core部分，AOP和Aspects也学完了。现在学的这个JdbcTemplate是在左上方的Data AccessIntegration部分，后面这个部分会被MyBatis替代，但我们可以先学一下，还是好学的。我们可以使用其实现增删改查的功能。</p>
<p>先创建一个maven项目，喵的，又要导入一大堆jar包。</p>
<p>然后创建jdbc.properties属性配置文件，把username、password、connector、url等数据库连接配置信息放里面（前面说过，降低耦合度）</p>
<img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415203200336.png" alt="image-20210415203200336" style="zoom:50%;" />

<p>然后创建applicationContext.xml配置文件（没错，就是我们的spring容器），然后配置如图的一堆信息。</p>
<p>JdbcTemplate和MyBatis功能是一样的。MyBatis对比JdbcTemplate优势明显。所以直接用MyBatis即可。</p>
<p>所以这个就先跳过了，后面直接整合MyBatis即可。</p>
<h3 id="Spring-事务回顾"><a href="#Spring-事务回顾" class="headerlink" title="Spring_事务回顾"></a>Spring_事务回顾</h3><p>我们的项目分为视图层、控制层、服务层、DAO层。事务和前两层没什么关系，主要是和服务层和DAO层有关系。DAO只封装数据的基本增删改查，不处理业务。Service专门处理业务，如果需要实现增删改查则通过DAO来影响数据库。</p>
<p><img src="C:\Users\xiaoqiyao\AppData\Roaming\Typora\typora-user-images\image-20210415210232126.png" alt="image-20210415210232126"></p>
<p>我们需要在执行service方法之前开启事务，在执行service方法之后检测其是否正常结束。而这刚好跟我们之前学的AOP相关。前置通知、异常通知和后置通知。</p>
<h3 id="Spring-日志使用"><a href="#Spring-日志使用" class="headerlink" title="Spring_日志使用"></a>Spring_日志使用</h3><p>和mybatis一样，在maven项目的pom.xm核心配置文件中导入log4j2的依赖</p>

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="reward-container">
  <div></div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="Motto WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="Motto Alipay">
        <span>Alipay</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Motto
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://mozartto.cn/2021/03/28/Spring/" title="Spring Framework">https://mozartto.cn/2021/03/28/Spring/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="https://twitter.com/Jerry21313800">
          <span class="icon">
            <i class="fab fa-twitter"></i>
          </span>

          <span class="label">Twitter</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
          <span class="icon">
            <i class="fab fa-weixin"></i>
          </span>

          <span class="label">WeChat</span>
        </a>
      </div>
  </div>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/03/21/Mybatis/" rel="prev" title="Mybatis详解">
                  <i class="fa fa-chevron-left"></i> Mybatis详解
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/04/13/JavaWeb/" rel="next" title="JavaWeb技术">
                  JavaWeb技术 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="SOHUCS"></div><script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">黔ICP备 2021003893 </a>
      <img src="/images/beian.png"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=2021003893" rel="noopener" target="_blank">黔网公安备 2021003893 </a>
  </div>

<div class="copyright">
  &copy; 2020 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fas fa-battery-full"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Motto</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Symbols count total: </span>
    <span title="Symbols count total">256k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">3:52</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{&quot;enable&quot;:true,&quot;tags&quot;:&quot;none&quot;,&quot;js&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;mathjax@3.1.4&#x2F;es5&#x2F;tex-mml-chtml.js&quot;}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="changyan" type="application/json">{&quot;enable&quot;:true,&quot;appid&quot;:&quot;cyvsVbDPQ&quot;,&quot;appkey&quot;:&quot;850d54eeada1b129a1fa523dedb189ff&quot;}</script>
<script src="/js/third-party/comments/changyan.js"></script>

</body>
</html>
